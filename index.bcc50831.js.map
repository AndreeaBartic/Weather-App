{"mappings":"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","sources":["src/background.js","src/display_citydate.js","src/search-bar.js"],"sourcesContent":["export function fetchCityImage(cityName) {\n  const URL = 'https://pixabay.com/api/';\n  const KEY = 'key=40060920-6840b24aaee2d2997514145f9';\n  const requestParameters = `?image_type=photo&category=travel&orientation=horizontal&q=${encodeURIComponent(\n    cityName\n  )}&page=1&per_page=40`;\n\n  return fetch(URL + requestParameters + '&' + KEY)\n    .then(res => {\n      if (!res.ok) {\n        throw new Error('Network response was not ok');\n      }\n      return res.json();\n    })\n    .then(image => {\n      if (image.hits && image.hits.length) {\n        const randomImg = Math.floor(Math.random() * image.hits.length);\n        return image.hits[randomImg].largeImageURL;\n      } else {\n        throw new Error('No images found.');\n      }\n    });\n}\n","export function updateTimeForCity(cityName) {\n  const sunriseDisplay = document.getElementById('sunriseDisplay');\n  const sunsetDisplay = document.getElementById('sunsetDisplay');\n\n  if (!cityName) {\n    console.error('City name is missing.');\n    return;\n  }\n  const apiKey = '384cfe62d8b3ed2e8a555db347025eef';\n\n  // Fetch sunrise and sunset times for the specified city\n  fetch(\n    `https://api.openweathermap.org/data/2.5/weather?q=${cityName}&appid=${apiKey}`\n  )\n    .then(response => response.json())\n    .then(data => {\n      if (data.cod === 200) {\n        const sunriseTime = new Date(\n          data.sys.sunrise * 1000\n        ).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n        const sunsetTime = new Date(data.sys.sunset * 1000).toLocaleTimeString(\n          [],\n          { hour: '2-digit', minute: '2-digit' }\n        );\n        sunriseDisplay.textContent = `${sunriseTime}`;\n        sunsetDisplay.textContent = `${sunsetTime}`;\n      } else {\n        console.error('Error fetching data for city:', data.message);\n      }\n    })\n    .catch(error =>\n      console.error('Error fetching data from OpenWeatherMap:', error)\n    );\n}\n\nexport function updateClockWithTimeZone(data) {\n  const currentTime = new Date();\n  let localTimeToGMT = data.locationTimezone / 3600;\n  let searchedCityToGMT = data.timezone / 3600;\n  let hours = currentTime.getHours();\n  let timeDifference = 0;\n  if (localTimeToGMT > searchedCityToGMT) {\n    if (localTimeToGMT >= 0) {\n      if (searchedCityToGMT >= 0) {\n        timeDifference = (localTimeToGMT - searchedCityToGMT) * -1;\n      } else if (searchedCityToGMT < 0) {\n        searchedCityToGMT *= -1;\n        timeDifference = (localTimeToGMT + searchedCityToGMT) * -1;\n      }\n    } else if (localTimeToGMT < 0) {\n      if (searchedCityToGMT < 0) {\n        searchedCityToGMT *= -1;\n        localTimeToGMT *= -1;\n        timeDifference = (localTimeToGMT - searchedCityToGMT) * -1;\n      }\n    }\n  } else if (searchedCityToGMT > localTimeToGMT) {\n    if (localTimeToGMT >= 0) {\n      timeDifference = searchedCityToGMT - localTimeToGMT;\n    } else if (localTimeToGMT < 0) {\n      localTimeToGMT *= -1;\n      timeDifference = searchedCityToGMT + localTimeToGMT;\n    }\n  }\n\n  if (timeDifference >= 0) {\n    if (hours + timeDifference >= 24) {\n      hours = timeDifference - (24 - hours);\n    } else {\n      hours += timeDifference;\n    }\n  } else if (timeDifference < 0) {\n    if (hours + timeDifference < 0) {\n      timeDifference *= -1;\n      hours = 24 - (timeDifference - hours);\n    } else {\n      timeDifference *= -1;\n      hours -= timeDifference;\n    }\n  }\n  const formattedHour = String(hours).padStart(2, '0');\n  const formattedMin = String(currentTime.getMinutes()).padStart(2, '0');\n  const formattedSec = String(currentTime.getSeconds()).padStart(2, '0');\n\n  const clockElement = document.querySelector('.dateDisplay__hour');\n  clockElement.textContent = `${formattedHour}:${formattedMin}:${formattedSec}`;\n}\n","import { fetchCityImage } from './background.js';\nimport { updateTimeForCity } from './display_citydate.js';\nimport { updateClockWithTimeZone } from './display_citydate.js';\n\nconst Key = '07aed853a2b3116bf7e19dfeee63b968';\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  console.log('DOMContentLoaded fired');\n  const form = document.querySelector('.search-bar');\n  const searchBarInput = document.querySelector('.search-bar_input');\n  const starIcon = document.querySelector('.search-bar_favorites-icon');\n  const favoritesList = document.querySelector('.favorites_list');\n  const favoritesLeftIcon = document.querySelector('.favorites_prev-btn');\n  const favoritesRightIcon = document.querySelector('.favorites_next-btn');\n\n  form.addEventListener('submit', function (event) {\n    event.preventDefault();\n    const cityName = searchBarInput.value.trim();\n    if (cityName) {\n      fetchWeather(cityName);\n    }\n  });\n\n  starIcon.addEventListener('click', function () {\n    const cityName = searchBarInput.value.trim();\n    this.classList.toggle('selected');\n    if (cityName && !isCityInFavorites(cityName)) {\n      addToFavorites(cityName);\n    }\n  });\n\n  const SCROLL_AMOUNT = 100;\n  favoritesLeftIcon.addEventListener('click', function () {\n    favoritesList.scrollBy({\n      left: -SCROLL_AMOUNT,\n      top: 0,\n      behavior: 'smooth',\n    });\n  });\n\n  favoritesRightIcon.addEventListener('click', function () {\n    favoritesList.scrollBy({\n      left: SCROLL_AMOUNT,\n      top: 0,\n      behavior: 'smooth',\n    });\n  });\n\n  function fetchWeather(cityName) {\n    const url = `https://api.openweathermap.org/data/2.5/weather?q=${cityName}&appid=${Key}`;\n    fetch(url)\n      .then(response => response.json())\n      .then(data => {\n        if (data.cod === 200) {\n          fetchCityImage(cityName)\n            .then(imageUrl => {\n              console.log('Fetched Image URL:', imageUrl);\n              document.body.style.backgroundImage = `url(${imageUrl})`;\n              document.body.style.backgroundSize = 'cover';\n              document.body.style.backgroundPosition = 'center';\n              document.body.style.backgroundRepeat = 'no-repeat';\n              updateClockWithTimeZone(data);\n              updateTimeForCity(cityName);\n            })\n            .catch(error => {\n              console.error('Error fetching city image:', error);\n            });\n        } else {\n          alert(data.message);\n        }\n      })\n      .catch(error => {\n        console.error('Error fetching weather data:', error);\n      });\n  }\n\n  function isCityInFavorites(cityName) {\n    const items = favoritesList.querySelectorAll('.favorites_item');\n    for (let item of items) {\n      if (item.textContent.trim().toLowerCase() === cityName.toLowerCase()) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  function addToFavorites(cityName) {\n    const listItem = document.createElement('li');\n    listItem.classList.add('favorites_item');\n    listItem.textContent = cityName;\n\n    const closeButton = document.createElement('span');\n    closeButton.classList.add('close-button');\n    closeButton.textContent = 'x';\n    closeButton.addEventListener('click', function () {\n      listItem.remove();\n    });\n\n    listItem.appendChild(closeButton);\n    favoritesList.appendChild(listItem);\n  }\n\n  const findCityLocation = () => {\n    console.log('findCityLocation called');\n\n    const success = position => {\n      console.log('Location access allowed');\n      const latitude = position.coords.latitude;\n      const longitude = position.coords.longitude;\n      const geoApiUrl = `https://api.openweathermap.org/geo/1.0/reverse?lat=${latitude}&lon=${longitude}&appid=${Key}`;\n\n      fetch(geoApiUrl)\n        .then(res => res.json())\n        .then(data => {\n          if (data && data.length > 0) {\n            const cityName = data[0].name;\n            console.log('Resolved City:', cityName);\n            fetchWeather(cityName);\n          } else {\n            console.error('City not found.');\n          }\n        })\n        .catch(error => {\n          console.error('Error fetching city name:', error);\n        });\n    };\n\n    const error = () => {\n      console.error('Could not get location.');\n    };\n    navigator.geolocation.getCurrentPosition(success, error);\n    const locationIcon = document.querySelector('.search-bar_location-icon');\n    locationIcon.addEventListener('click', () => {\n      console.log('Location icon clicked');\n      navigator.geolocation.getCurrentPosition(success, error);\n    });\n  };\n\n  findCityLocation();\n});\n"],"names":["$6a427eaf56dc66fa$export$a9bd09813a73c79a","cityName","requestParameters","encodeURIComponent","fetch","URL","then","res","ok","Error","json","image","hits","length","randomImg","Math","floor","random","largeImageURL","$1e81b917887df130$export$76cd35b725472fef","sunriseDisplay","document","getElementById","sunsetDisplay","console","error","response","data","cod","sunriseTime","Date","sys","sunrise","toLocaleTimeString","hour","minute","sunsetTime","sunset","textContent","message","catch","$1e81b917887df130$export$328f5c06ddd4d781","currentTime","localTimeToGMT","locationTimezone","searchedCityToGMT","timezone","hours","getHours","timeDifference","formattedHour","String","padStart","formattedMin","getMinutes","formattedSec","getSeconds","querySelector","addEventListener","log","form","searchBarInput","starIcon","favoritesList","favoritesLeftIcon","favoritesRightIcon","event","preventDefault","value","trim","fetchWeather","this","classList","toggle","items","querySelectorAll","item","toLowerCase","isCityInFavorites","listItem","createElement","add","closeButton","remove","appendChild","addToFavorites","imageUrl","body","style","backgroundImage","backgroundSize","backgroundPosition","backgroundRepeat","alert","scrollBy","left","top","behavior","success","position","latitude","coords","longitude","name","error1","navigator","geolocation","getCurrentPosition","findCityLocation"],"version":3,"file":"index.bcc50831.js.map"}